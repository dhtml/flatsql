<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>FLAQSQL Tutorial</title>
</head>

<body>
<div>
  <h1>FlatSQL Tutorial</h1>
  <h2>Example usage of flatfile class</h2>
</div>
<div>Brought to you by Ogundipe Anthony / www.dhtmlextreme.net / support@dhtmlextreme.net</div>
<h2>Introduction</h2>
<p>The FlatSQL package is a small but very poweful set of classes for database like access to text &quot;flat files&quot;. It provides equivalents to many of the common SQL commands.</p>
<p>This package was created and developed by Anthony Ogundipe, CEO of [DHTMLExtreme](http://www.dhtmlextreme.net).<br />
</p>
<p>Setup</p>
<p>Now we need to create the database object and set it up. In this example we are using a database called CMS. The database is created automatically if it does not exist.</p>
<ol>
  <li>
    <div>require_once('ffdb/dbase.php');</div>
  </li>
  <li>
    <div>$db = new Flatsql();</div>
  </li>
  <li>
    <div>$db->query("use dbase cms");</div>
  </li>
</ol>
<h2>&nbsp;</h2>
<h2>INSERT</h2>
<p>To insert a row, use the following sql statements. An autoincrement ID is generated by default. And oh, there is no create table function, table is created automatically if it does not already exist. The return value is the newly generated ID. Notice that the first field called uid is the auto-generated I.D - this is required be default.</p>
<ol>
  <li>
    <div>$db->query("insert into users(uid,first,last,city,phone) value(Null,'Anthony','Ogundipe','Lagos','08027034534')");
</div>
  </li>
  <li>
    <div>echo $db->newId; //latest id</div>
  </li>
</ol>
<h2></h2>
<h2>SELECT</h2>
<p>If you are familiar with MySQL or sql in general, then the commands below will not be new to you.</p>
<ol>
  <li>$row=$db-&gt;query(&quot;select * from users&quot;); //select all the data available</li>
  <li>$row=$db-&gt;query(&quot;select first,last from users&quot;); //select first and lastname only</li>
  <li>$row=$db->query("select last,phone,first from users");
</li>
  <li>$row=$db->query("select first,last from users where city='Lagos' order by uid asc INTEGER_COMPARISON"); //ordering data
<li>$row=$db->query("select first,last from users where city='Lagos' order by first asc limit 1");
//limiting data returned
<li>$row=$db->query("select first,last from users where city='Egbe'");
//where clause<li>$row=$db->query("select first,last from users where uid='2'");
<li>$row=$db->query("select first,last from users where uid>'2' and first='Okon'");
//multiple conditions<li>$row=$db->query("select first,last from users where city='Lagos' and phone='070603223456'");
<li>$row=$db->query("select first,last from users where city='Lagos' and phone='08027034534' ");
<li>$row=$db->query("select first,last from users where city='Lagos' order by phone asc");
<li>$row=$db->query("select first,last from users where city='Lagos' and phone='08027034534' order by phone asc");
</ol>
<p>The result will be an array of arrays. You can loop through the associative arrays to get the individual data.</p>
<p>&nbsp;</p>
<h2>UPDATE</h2>
<p>To update records stored in tables, you can use regular MySQL statements.</p>
<ol>
  <li>
    <div>$db-&gt;query(&quot;update users set last='White',city='Broad Street' where uid&lt;'3'&quot;);</div>
  </li>
  <li>
    <div>$db-&gt;query(&quot;update users set last='White' &quot;); //this will update the entire column</div>
  </li>
</ol>
<p>&nbsp;</p>
<h2>DELETE RECORDS</h2>
<p>MySQL delete statements are useful here also. </p>
<ol>
  <li>
    <div>$db-&gt;query(&quot;delete from users where uid='1'&quot;); //delete conditionally</div>
  </li>
  <li>
    <div> $db-&gt;query(&quot;delete from users&quot;); //delete entire rows - truncate</div>
  </li>
</ol>
<p>&nbsp;</p>
<h2>DELETE TABLE</h2>
<p>To delete an entire table and all the data it contains.</p>
<ol>
  <li>$db-&gt;query(&quot;drop table users&quot;);</li>
</ol>
<h2></h2>
<h2>TRUNCATE TABLE</h2>
<p>To delete all the records stored inside a  table.</p>
<ol>
  <li>$db-&gt;query(&quot;truncate table users&quot;);</li>
</ol>

<h2></h2>
<h2>COMBINING WITH FLAT FILE PACKAGE</h2>
You can use flat file commands concurrently as shown below. However, flatfile discussion is outside the scope of this tutorial.
<ol>
<li>$db = new Flatsql();
<li>$db->query("use dbase cms");
<li>$aSingleRow = $db->selectUnique('cms.txt', 0, '2');
<li>var_dump($aSingleRow);
</ol>


<h2></h2>
<h2>NOTE</h2>
<p>This package is a wrapper for the Flatfile Class created by Luke Plant. In fact, the wrapper extends the flat file package and provides all the functionalities of the flat file package which are not mentioned here since this is outside of the scope of this tutorial.</p>
<p>
Find out more on about our projects on <a href="https://github.com/dhtml">https://github.com/dhtml</a> and visit our website <a href="http://www.blogs.dhtmlextreme.net/flatsql">http://www.dhtmlextreme.net</a></p>
</body>
</html>
